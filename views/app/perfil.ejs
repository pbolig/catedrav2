<!DOCTYPE html>
<html lang="es">
<head>
    <%- include('../partials/head') %>
    <title>Mi Perfil - Gestor de Cátedras</title>
</head>
<body>
    <%- include('../partials/header') %>

    <main class="dashboard-container">
        <h1>Mi Perfil</h1>
        <%- include('../partials/messages') %>

        <a href="/app" class="btn-volver">← Volver al Panel</a>

        <div class="dashboard-grid">
            <div class="card">
                <h2>Datos Personales</h2>
                <form action="/app/perfil" method="POST">
                    <div class="form-group">
                        <label for="nombre">Nombre Completo</label>
                        <input type="text" id="nombre" name="nombre" value="<%= user.nombre || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Correo Electrónico</label>
                        <input type="email" id="email" name="email" value="<%= user.email %>" required>
                    </div>
                    <button type="submit" class="btn-submit">Guardar Cambios</button>
                </form>
            </div>

            <div class="card">
                <h2>Mis Establecimientos</h2>
                <div class="establecimientos-list">
                    <% if (establecimientos.length > 0) { %>
                        <ul>
                            <% establecimientos.forEach(est => { %>
                                <li><%= est.nombre_establecimiento %></li>
                            <% }); %>
                        </ul>
                    <% } else { %>
                        <p>Aún no has añadido ningún establecimiento.</p>
                    <% } %>
                </div>
                <hr>
                <form action="/app/establecimientos" method="POST">
                    <div class="form-group">
                        <label for="nombre_establecimiento">Añadir Nuevo Establecimiento</label>
                        <input type="text" id="nombre_establecimiento" name="nombre_establecimiento" placeholder="Nombre de la institución" required>
                    </div>
                    <button type="submit" class="btn-submit">Añadir</button>
                </form>
            </div>
        </div>
    </main>

    <%- include('../partials/footer') %>
</body>
</html>